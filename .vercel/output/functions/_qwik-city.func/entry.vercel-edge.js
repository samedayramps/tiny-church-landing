var Te=Object.defineProperty;var xe=(e,t,n)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var P=(e,t,n)=>xe(e,typeof t!="symbol"?t+"":t,n);import{getNotFound as Ce}from"./@qwik-city-not-found-paths.js";import{isStaticPath as G}from"./@qwik-city-static-paths.js";import{_ as De,a as Pe,v as Me}from"./q-DIpVaiZb.js";import{s as Oe,r as ve,m as Ne}from"./q-ChEZ6HLF.js";import ke from"./@qwik-city-plan.js";var We=class extends Error{constructor(e,t){super(),this.status=e,this.data=t}},ue=class extends Error{constructor(e,t){super(t),this.status=e}};function $e(e,t){let n="Server Error";return t!=null&&(typeof t.message=="string"?n=t.message:n=String(t)),"<html>"+de(e,n)+"</html>"}function de(e,t){typeof e!="number"&&(e=500),typeof t=="string"?t=Ie(t):t="";const n=typeof t=="string"?"600px":"300px",r=e>=500?Ue:He;return`
<head>
  <meta charset="utf-8">
  <meta http-equiv="Status" content="${e}">
  <title>${e} ${t}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { color: ${r}; background-color: #fafafa; padding: 30px; font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Roboto, sans-serif; }
    p { max-width: ${n}; margin: 60px auto 30px auto; background: white; border-radius: 4px; box-shadow: 0px 0px 50px -20px ${r}; overflow: hidden; }
    strong { display: inline-block; padding: 15px; background: ${r}; color: white; }
    span { display: inline-block; padding: 15px; }
  </style>
</head>
<body><p><strong>${e}</strong> <span>${t}</span></p></body>
`}var Le=/[&<>]/g,Ie=e=>e.replace(Le,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return""}}),He="#006ce9",Ue="#713fc2",Ee={lax:"Lax",Lax:"Lax",None:"None",none:"None",strict:"Strict",Strict:"Strict"},Qe={seconds:1,minutes:1*60,hours:1*60*60,days:1*60*60*24,weeks:1*60*60*24*7},J=(e,t,n)=>{const r=[`${e}=${t}`];typeof n.domain=="string"&&r.push(`Domain=${n.domain}`),typeof n.maxAge=="number"?r.push(`Max-Age=${n.maxAge}`):Array.isArray(n.maxAge)?r.push(`Max-Age=${n.maxAge[0]*Qe[n.maxAge[1]]}`):typeof n.expires=="number"||typeof n.expires=="string"?r.push(`Expires=${n.expires}`):n.expires instanceof Date&&r.push(`Expires=${n.expires.toUTCString()}`),n.httpOnly&&r.push("HttpOnly"),typeof n.path=="string"&&r.push(`Path=${n.path}`);const a=je(n.sameSite);return a&&r.push(`SameSite=${a}`),n.secure&&r.push("Secure"),r.join("; ")};function X(e){try{return decodeURIComponent(e)}catch{return e}}var ze=e=>{const t={};if(typeof e=="string"&&e!==""){const n=e.split(";");for(const r of n){const a=r.indexOf("=");a!==-1&&(t[X(r.slice(0,a).trim())]=X(r.slice(a+1).trim()))}}return t};function je(e){if(e===!0)return"Strict";if(e===!1)return"None";if(e)return Ee[e]}var T=Symbol("request-cookies"),N=Symbol("response-cookies"),A=Symbol("live-cookies"),ce,le,fe,Fe=(fe=T,le=N,ce=A,class{constructor(e){P(this,fe);P(this,le,{});P(this,ce,{});P(this,"appendCounter",0);this[T]=ze(e),this[A]={...this[T]}}get(e,t=!0){const n=this[t?A:T][e];return n?{value:n,json(){return JSON.parse(n)},number(){return Number(n)}}:null}getAll(e=!0){return Object.keys(this[e?A:T]).reduce((t,n)=>(t[n]=this.get(n),t),{})}has(e,t=!0){return!!this[t?A:T][e]}set(e,t,n={}){this[A][e]=typeof t=="string"?t:JSON.stringify(t);const r=typeof t=="string"?t:encodeURIComponent(JSON.stringify(t));this[N][e]=J(e,r,n)}append(e,t,n={}){this[A][e]=typeof t=="string"?t:JSON.stringify(t);const r=typeof t=="string"?t:encodeURIComponent(JSON.stringify(t));this[N][++this.appendCounter]=J(e,r,n)}delete(e,t){this.set(e,"deleted",{...t,maxAge:0}),this[A][e]=null}headers(){return Object.values(this[N])}}),Be=(e,t)=>{const n=t.headers();if(n.length>0){const r=new Headers(e);for(const a of n)r.append("Set-Cookie",a);return r}return e},B=class{},k=class extends B{},Y=new WeakMap,V="qaction",Ke="qfunc",Z="qdata";function Ge(e,t){const n=te(e),r=q(e),a=te(t),s=q(t);return he(e,n,r,t,a,s)}function he(e,t,n,r,a,s){let o=null;for(;t<n;){const i=e.charCodeAt(t++),c=r.charCodeAt(a++);if(i===91){const l=pe(e,t),f=t+(l?3:0),d=F(e,f,n,93),p=e.substring(f,d),m=F(e,d+1,n,47),g=e.substring(d+1,m);t=d+1;const y=a-1;if(l){const C=Xe(p,g,r,y,s,e,t+g.length+1,n);if(C)return Object.assign(o||(o={}),C)}const w=F(r,y,s,47,g);if(w==-1)return null;const _=r.substring(y,w);if(!l&&!g&&!_)return null;a=w,(o||(o={}))[p]=decodeURIComponent(_)}else if(i!==c&&!(isNaN(c)&&Je(e,t)))return null}return ee(e,t)&&ee(r,a)?o||{}:null}function Je(e,t){return e.charCodeAt(t)===91&&pe(e,t+1)}function q(e){const t=e.length;return t>1&&e.charCodeAt(t-1)===47?t-1:t}function ee(e,t){const n=e.length;return t>=n||t==n-1&&e.charCodeAt(t)===47}function te(e){return e.charCodeAt(0)===47?1:0}function pe(e,t){return e.charCodeAt(t)===46&&e.charCodeAt(t+1)===46&&e.charCodeAt(t+2)===46}function F(e,t,n,r,a=""){for(;t<n&&e.charCodeAt(t)!==r;)t++;const s=a.length;for(let o=0;o<s;o++)if(e.charCodeAt(t-s+o)!==a.charCodeAt(o))return-1;return t-s}function Xe(e,t,n,r,a,s,o,i){n.charCodeAt(r)===47&&r++;let c=a;const l=t+"/";for(;c>=r;){const f=he(s,o,i,n,c,a);if(f){let p=n.substring(r,Math.min(c,a));return p.endsWith(l)&&(p=p.substring(0,p.length-l.length)),f[e]=decodeURIComponent(p),f}const d=Ye(n,r,l,c,r-1)+l.length;if(c===d)break;c=d}return null}function Ye(e,t,n,r,a){let s=e.lastIndexOf(n,r);return s==r-n.length&&(s=e.lastIndexOf(n,r-n.length-1)),s>t?s:a}var Ve=async(e,t,n,r)=>{if(!Array.isArray(e))return null;for(const a of e){const s=a[0],o=Ge(s,r);if(!o)continue;const i=a[1],c=a[3],l=new Array(i.length),f=[];i.forEach((m,g)=>{ne(m,f,y=>l[g]=y,n)});const d=Ze(t,r);let p;return ne(d,f,m=>p=m==null?void 0:m.default,n),f.length>0&&await Promise.all(f),[s,o,l,p,c]}return null},ne=(e,t,n,r)=>{if(typeof e=="function"){const a=Y.get(e);if(a)n(a);else{const s=e();typeof s.then=="function"?t.push(s.then(o=>{r!==!1&&Y.set(e,o),n(o)})):s&&n(s)}}},Ze=(e,t)=>{if(e){t=t.endsWith("/")?t:t+"/";const n=e.find(r=>r[0]===t||t.startsWith(r[0]+(t.endsWith("/")?"":"/")));if(n)return n[1]}};function qe(e){const t=[];return e==="day"?e=60*60*24:e==="week"?e=60*60*24*7:e==="month"?e=60*60*24*30:e==="year"?e=60*60*24*365:e==="private"?e={private:!0,noCache:!0}:e==="immutable"?e={public:!0,immutable:!0,maxAge:60*60*24*365,staleWhileRevalidate:60*60*24*365}:e==="no-cache"&&(e={noCache:!0}),typeof e=="number"&&(e={maxAge:e,sMaxAge:e,staleWhileRevalidate:e}),e.immutable&&t.push("immutable"),e.maxAge&&t.push(`max-age=${e.maxAge}`),e.sMaxAge&&t.push(`s-maxage=${e.sMaxAge}`),e.noStore&&t.push("no-store"),e.noCache&&t.push("no-cache"),e.private&&t.push("private"),e.public&&t.push("public"),e.staleWhileRevalidate&&t.push(`stale-while-revalidate=${e.staleWhileRevalidate}`),e.staleIfError&&t.push(`stale-if-error=${e.staleIfError}`),t.join(", ")}var W;import("node:async_hooks").then(e=>{const t=e.AsyncLocalStorage;W=new t,globalThis.qcAsyncRequestStore=W}).catch(e=>{console.warn("AsyncLocalStorage not available, continuing without it. This might impact concurrent server calls.",e)});function et(e,t,n,r,a=!0,s="/",o){let i;const c=new Promise(f=>i=f),l=at(e,t,n,r,a,s,o,i);return{response:c,requestEv:l,completion:W?W.run(l,re,l,i):re(l,i)}}async function re(e,t){try{await e.next()}catch(n){if(n instanceof k)await e.getWritableStream().close();else if(n instanceof ue){if(console.error(n),!e.headersSent){const r=$e(n.status,n),a=n.status;e.html(a,r)}}else if(!(n instanceof B)){if(E(e)!=="dev")try{e.headersSent||(e.headers.set("content-type","text/html; charset=utf-8"),e.cacheControl({noCache:!0}),e.status(500));const r=e.getWritableStream();if(!r.locked){const a=r.getWriter();await a.write(Q.encode(de(500,"Internal Server Error"))),await a.close()}}catch{console.error("Unable to render error page")}return n}}finally{e.isDirty()||t(null)}}function tt(e,t){if(e.endsWith(x)){const n=e.length-me+(t?1:0);e=e.slice(0,n),e===""&&(e="/")}return e}var M="@isQData",x="/q-data.json",me=x.length,nt=e=>e&&typeof e.then=="function",ge=Symbol("RequestEvLoaders"),ye=Symbol("RequestEvMode"),we=Symbol("RequestEvRoute"),I=Symbol("RequestEvQwikSerializer"),Se=Symbol("RequestEvTrailingSlash"),be="@routeName",H="@actionId",Re="@actionFormData",rt="@nonce";function at(e,t,n,r,a,s,o,i){const{request:c,platform:l,env:f}=e,d=new Map,p=new Fe(c.headers.get("cookie")),m=new Headers,g=new URL(c.url);g.pathname.endsWith(x)&&(g.pathname=g.pathname.slice(0,-me),a&&!g.pathname.endsWith("/")&&(g.pathname+="/"),d.set(M,!0)),d.set("@manifest",r);let y=-1,w=null,_,C=e.locale,b=200;const Ae=async()=>{for(y++;y<n.length;){const u=n[y],h=globalThis.qcAsyncRequestStore,S=h!=null&&h.run?h.run(R,u,R):u(R);nt(S)&&await S,y++}},D=()=>{if(w!==null)throw new Error("Response already sent")},O=(u,h)=>{if(D(),typeof u=="number"){b=u;const v=R.getWritableStream().getWriter();v.write(typeof h=="string"?Q.encode(h):h),v.close()}else if(b=u.status,u.headers.forEach((S,v)=>{m.append(v,S)}),u.body){const S=R.getWritableStream();u.body.pipeTo(S)}else{if(b>=300&&b<400)return new k;R.getWritableStream().getWriter().close()}return z()},z=()=>(y=ae,new B),j={},R={[ge]:j,[ye]:e.mode,[Se]:a,[we]:t,[I]:o,cookie:p,headers:m,env:f,method:c.method,signal:c.signal,params:(t==null?void 0:t[1])??{},pathname:g.pathname,platform:l,query:g.searchParams,request:c,url:g,basePathname:s,sharedMap:d,get headersSent(){return w!==null},get exited(){return y>=ae},get clientConn(){return e.getClientConn()},next:Ae,exit:z,cacheControl:(u,h="Cache-Control")=>{D(),m.set(h,qe(u))},resolveValue:async u=>{const h=u.__id;if(u.__brand==="server_loader"&&!(h in j))throw new Error("You can not get the returned data of a loader that has not been executed for this request.");return j[h]},status:u=>typeof u=="number"?(D(),b=u,u):b,locale:u=>(typeof u=="string"&&(C=u),C||""),error:(u,h)=>(b=u,new ue(u,h)),redirect:(u,h)=>{if(D(),b=u,h){const S=h.replace(/([^:])\/{2,}/g,"$1/");h!==S&&console.warn(`Redirect URL ${h} is invalid, fixing to ${S}`),m.set("Location",S)}return u>301&&!m.get("Cache-Control")&&m.set("Cache-Control","no-store"),z(),new k},defer:u=>typeof u=="function"?u:()=>u,fail:(u,h)=>(D(),b=u,{failed:!0,...h}),text:(u,h)=>(m.set("Content-Type","text/plain; charset=utf-8"),O(u,h)),html:(u,h)=>(m.set("Content-Type","text/html; charset=utf-8"),O(u,h)),parseBody:async()=>_!==void 0?_:_=it(R,d,o),json:(u,h)=>(m.set("Content-Type","application/json; charset=utf-8"),O(u,JSON.stringify(h))),send:O,isDirty:()=>w!==null,getWritableStream:()=>{if(w===null){if(e.mode==="dev"){const u=d.get("@serverTiming");u&&m.set("Server-Timing",u.map(h=>`${h[0]};dur=${h[1]}`).join(","))}w=e.getWritableStream(b,m,p,i,R)}return w}};return Object.freeze(R)}function U(e){return e[ge]}function K(e){return e[Se]}function st(e){return e[we]}function E(e){return e[ye]}var ae=Number.MAX_SAFE_INTEGER,it=async({request:e,method:t,query:n},r,a)=>{var s;const o=((s=e.headers.get("content-type"))==null?void 0:s.split(/[;,]/,1)[0].trim())??"";if(o==="application/x-www-form-urlencoded"||o==="multipart/form-data"){const i=await e.formData();return r.set(Re,i),ot(i)}else{if(o==="application/json")return await e.json();if(o==="application/qwik-json"){if(t==="GET"&&n.has(Z)){const i=n.get(Z);if(i)try{return a._deserializeData(decodeURIComponent(i))}catch{}}return a._deserializeData(await e.text())}}},ot=e=>[...e.entries()].reduce((n,[r,a])=>(r.split(".").reduce((s,o,i,c)=>{if(o.endsWith("[]")){const l=o.slice(0,-2);return s[l]=s[l]||[],s[l]=[...s[l],a]}return i<c.length-1?s[o]=s[o]||(Number.isNaN(+c[i+1])?{}:[]):s[o]=a},n),n),{});function ct(e){const{url:t,params:n,request:r,status:a,locale:s}=e,o={};r.headers.forEach((y,w)=>o[w]=y);const i=e.sharedMap.get(H),c=e.sharedMap.get(Re),l=e.sharedMap.get(be),f=e.sharedMap.get(rt),d=e.request.headers,p=new URL(t.pathname+t.search,t),m=d.get("X-Forwarded-Host"),g=d.get("X-Forwarded-Proto");return m&&(p.port="",p.host=m),g&&(p.protocol=g),{url:p.href,requestHeaders:o,locale:s(),nonce:f,containerAttributes:{"q:route":l},qwikcity:{routeName:l,ev:e,params:{...n},loadedRoute:st(e),response:{status:a(),loaders:U(e),action:i,formData:c}}}}var lt=(e,t,n,r,a)=>{const s=[],o=[],i=[],c=!!(t&&mt(t[2]));if(e&&se(s,o,i,e,c,n),t){const l=t[0];r&&(n==="POST"||n==="PUT"||n==="PATCH"||n==="DELETE")&&i.unshift(gt),c&&((n==="POST"||n==="GET")&&i.push(dt),i.push(ht),i.push(St));const f=t[2];i.push(wt),se(s,o,i,f,c,n),c&&(i.push(d=>{d.sharedMap.set(be,l)}),i.push(ft(o,s)),i.push(a))}return i},se=(e,t,n,r,a,s)=>{for(const o of r){typeof o.onRequest=="function"?n.push(o.onRequest):Array.isArray(o.onRequest)&&n.push(...o.onRequest);let i;switch(s){case"GET":{i=o.onGet;break}case"POST":{i=o.onPost;break}case"PUT":{i=o.onPut;break}case"PATCH":{i=o.onPatch;break}case"DELETE":{i=o.onDelete;break}case"OPTIONS":{i=o.onOptions;break}case"HEAD":{i=o.onHead;break}}if(typeof i=="function"?n.push(i):Array.isArray(i)&&n.push(...i),a)for(const c of Object.values(o))typeof c=="function"&&(c.__brand==="server_loader"?e.push(c):c.__brand==="server_action"&&t.push(c))}};function ft(e,t){return async n=>{if(n.headersSent){n.exit();return}const{method:r}=n,a=U(n),s=E(n)==="dev",o=n[I];if(s&&r==="GET"&&n.query.has(V)&&console.warn(`Seems like you are submitting a Qwik Action via GET request. Qwik Actions should be submitted via POST request.
Make sure your <form> has method="POST" attribute, like this: <form method="POST">`),r==="POST"){const i=n.query.get(V);if(i){const c=globalThis._qwikActionsMap,l=e.find(f=>f.__id===i)??(c==null?void 0:c.get(i));if(l){n.sharedMap.set(H,i);const f=await n.parseBody();if(!f||typeof f!="object")throw new Error(`Expected request data for the action id ${i} to be an object`);const d=await ie(n,l.__validators,f,s);if(!d.success)a[i]=n.fail(d.status??500,d.error);else{const p=s?await L(n,l.__qrl.getSymbol().split("_",1)[0],()=>l.__qrl.call(n,d.data,n)):await l.__qrl.call(n,d.data,n);s&&$(o,p,l.__qrl),a[i]=p}}}}if(t.length>0){const i=t.map(c=>{const l=c.__id;return a[l]=ie(n,c.__validators,void 0,s).then(f=>f.success?s?L(n,c.__qrl.getSymbol().split("_",1)[0],()=>c.__qrl.call(n,n)):c.__qrl.call(n,n):n.fail(f.status??500,f.error)).then(f=>(typeof f=="function"?a[l]=f():(s&&$(o,f,c.__qrl),a[l]=f),f)),a[l]});await Promise.all(i)}}}async function ie(e,t,n,r){let a={success:!0,data:n};if(t)for(const s of t)if(r?a=await L(e,"validator$",()=>s.validate(e,n)):a=await s.validate(e,n),a.success)n=a.data;else return a;return a}function ut(e){return e?typeof e=="object"&&Symbol.asyncIterator in e:!1}async function dt(e){const t=e.query.get(Ke);if(t&&e.request.headers.get("X-QRL")===t&&e.request.headers.get("Content-Type")==="application/qwik-json"){e.exit();const n=E(e)==="dev",r=e[I],a=await e.parseBody();if(Array.isArray(a)){const[s,...o]=a;if(pt(s)&&s.getHash()===t){let i;try{n?i=await L(e,`server_${s.getSymbol()}`,()=>s.apply(e,o)):i=await s.apply(e,o)}catch(c){if(c instanceof We){e.headers.set("Content-Type","application/qwik-json"),e.send(c.status,await r._serializeData(c.data,!0));return}e.headers.set("Content-Type","application/qwik-json"),e.send(500,await r._serializeData(c,!0));return}if(ut(i)){e.headers.set("Content-Type","text/qwik-json-stream");const l=e.getWritableStream().getWriter();for await(const f of i){n&&$(r,f,s);const d=await r._serializeData(f,!0);if(e.signal.aborted)break;await l.write(Q.encode(`${d}
`))}l.close()}else{$(r,i,s),e.headers.set("Content-Type","application/qwik-json");const c=await r._serializeData(i,!0);e.send(200,c)}return}}throw e.error(500,"Invalid request")}}function ht(e){const t=K(e),{basePathname:n,pathname:r,url:a,sharedMap:s}=e;if(!s.has(M)&&r!==n&&!r.endsWith(".html")){if(t){if(!r.endsWith("/"))throw e.redirect(301,r+"/"+a.search)}else if(r.endsWith("/"))throw e.redirect(301,r.slice(0,r.length-1)+a.search)}}function $(e,t,n){try{e._verifySerializable(t,void 0)}catch(r){throw r instanceof Error&&n.dev&&(r.loc=n.dev),r}}var pt=e=>typeof e=="function"&&typeof e.getSymbol=="function";function mt(e){const t=e[e.length-1];return t&&typeof t.default=="function"}function _e(e,t){e=new URL(e),e.pathname.endsWith(x)&&(e.pathname=e.pathname.slice(0,-x.length)),t?e.pathname.endsWith("/")||(e.pathname+="/"):e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1));const n=e.search.slice(1).replaceAll(/&?q(action|data|func)=[^&]+/g,"");return`${e.pathname}${n?`?${n}`:""}${e.hash}`}var Q=new TextEncoder;function gt(e){if(Rt(e.request.headers,"application/x-www-form-urlencoded","multipart/form-data","text/plain")){const n=e.request.headers.get("origin"),r=e.url.origin;if(n!==r)throw e.error(403,`CSRF check failed. Cross-site ${e.method} form submissions are forbidden.
The request origin "${n}" does not match the server origin "${r}".`)}}function yt(e){return async t=>{if(t.headersSent||t.sharedMap.has(M))return;t.request.headers.forEach((d,p)=>d);const r=t.headers;r.has("Content-Type")||r.set("Content-Type","text/html; charset=utf-8");const a=K(t),{readable:s,writable:o}=new TextEncoderStream,i=t.getWritableStream(),c=s.pipeTo(i,{preventClose:!0}),l=o.getWriter(),f=t.status();try{const d=E(t)==="static",p=ct(t),m=await e({base:t.basePathname+"build/",stream:l,serverData:p,containerAttributes:{"q:render":d?"static":"",...p.containerAttributes}}),g={loaders:U(t),action:t.sharedMap.get(H),status:f!==200?f:200,href:_e(t.url,a)};typeof m.html=="string"&&await l.write(m.html),t.sharedMap.set("qData",g)}finally{await l.ready,await l.close(),await c}await i.close()}}async function wt(e){if(!e.sharedMap.has(M))return;try{await e.next()}catch(s){if(!(s instanceof k))throw s}if(e.headersSent)return;const n=e.status(),r=e.headers.get("Location");if(n>=301&&n<=308&&r){const s=bt(r);if(s){e.headers.set("Location",s),e.getWritableStream().close();return}else e.status(200),e.headers.delete("Location")}}async function St(e){if(!e.sharedMap.has(M)||(await e.next(),e.headersSent||e.exited))return;const n=e.status(),r=e.headers.get("Location"),a=K(e);e.request.headers.forEach((l,f)=>l),e.headers.set("Content-Type","application/json; charset=utf-8");const s={loaders:U(e),action:e.sharedMap.get(H),status:n!==200?n:200,href:_e(e.url,a),redirect:r??void 0},o=e.getWritableStream().getWriter(),c=await e[I]._serializeData(s,!0);o.write(Q.encode(c)),e.sharedMap.set("qData",s),o.close()}function bt(e){if(e.startsWith("/")){const t=x,n=new URL(e,"http://localhost");return(n.pathname.endsWith("/")?n.pathname.slice(0,-1):n.pathname)+(t.startsWith("/")?"":"/")+t+n.search}else return}function oe(){return typeof performance<"u"?performance.now():0}async function L(e,t,n){const r=oe();try{return await n()}finally{const a=oe()-r;let s=e.sharedMap.get("@serverTiming");s||e.sharedMap.set("@serverTiming",s=[]),s.push([t,a])}}function Rt(e,...t){var n;const r=((n=e.get("content-type"))==null?void 0:n.split(/;,/,1)[0].trim())??"";return t.includes(r)}async function _t(e,t,n){const{render:r,qwikCityPlan:a,manifest:s,checkOrigin:o}=t,i=e.url.pathname,c=tt(i,a.trailingSlash),l=await At(a,c,e.request.method,o??!0,r);if(l){const[f,d]=l;return et(e,f,d,s,a.trailingSlash,a.basePathname,n)}return null}async function At(e,t,n,r,a){const{routes:s,serverPlugins:o,menus:i,cacheModules:c}=e,l=await Ve(s,i,c,t),f=lt(o,l,n,r,yt(a));return f.length>0?[l,f]:null}var Tt="x-vercel-ip-country",xt="x-real-ip",Ct="__vdpl",Dt="VERCEL_SKEW_PROTECTION_ENABLED",Pt="VERCEL_DEPLOYMENT_ID",Mt="BASE_URL";function Ot(e){const t={_deserializeData:De,_serializeData:Pe,_verifySerializable:Me};e.manifest&&Oe(e.manifest);async function n(r){try{const a=new URL(r.url);if(G(r.method,a))return new Response(null,{headers:{"x-middleware-next":"1"}});const s=globalThis.process,o={mode:"server",locale:void 0,url:a,request:r,env:{get(l){return s.env[l]}},getWritableStream:(l,f,d,p)=>{const{readable:m,writable:g}=new TransformStream;if(o.env.get(Dt)){const w=o.env.get(Pt)||"",_=o.env.get(Mt)||"/";r.headers.has("Sec-Fetch-Dest")&&d.set(Ct,w,{path:_,secure:!0,sameSite:!0,httpOnly:!0})}const y=new Response(m,{status:l,headers:Be(f,d)});return p(y),g},platform:{},getClientConn:()=>({ip:r.headers.get(xt)??void 0,country:r.headers.get(Tt)??void 0})},i=await _t(o,e,t);if(i){i.completion.then(f=>{f&&console.error(f)});const l=await i.response;if(l)return l}const c=G(r.method||"GET",a)?"Not Found":Ce(a.pathname);return new Response(c,{status:404,headers:{"Content-Type":"text/html; charset=utf-8","X-Not-Found":a.pathname}})}catch(a){return console.error(a),new Response(String(a||"Error"),{status:500,headers:{"Content-Type":"text/plain; charset=utf-8","X-Error":"vercel-edge"}})}}return n}const It=Ot({render:ve,qwikCityPlan:ke,manifest:Ne});export{It as default};
